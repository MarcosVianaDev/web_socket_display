<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>&gt;&gt;{{user_name}}</title>
    <link rel="stylesheet" href="./libs/bootstrap/css/bootstrap.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        .container>div * {
            font-size: 32px;
        }

        #tempo_segundos {
            width: 2em;
        }
        label{
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            justify-content: space-between;
            padding-bottom: 4px;
            border-bottom: 1px solid black;
        }

    </style>
</head>

<body class="vh-100">
    <div class="container d-flex h-100 w-100 flex-column flex-md-row align-items-center gap-4">
        <iframe src='/logar/{{user_name}}' class="border border-1 border-black h-50 col col-md-6"></iframe>
        <div class="d-flex flex-column border border-1 border-black bg-dark-subtle p-2 ">
            <label>
                <span>Nome: </span>
                <input type="text" id="texto" value="Exemplo" class="w-100">
            </label>
            <label>
                <span>cor da fonte: </span>
                <input type="color" id="cor_fonte" value="#0000ff">
            </label>
            <label>
                <span>cor do fundo: </span>
                <input type="color" id="cor_fundo" value="#cccccc">
            </label>
            <label>
                <span>Animação: </span>
                <select id="anim">
                    <option value="slide" selected>slide</option>
                </select>
            </label>
            <label>
                <span>tempo (segundos): </span>
                <input type="number" id="tempo_segundos" min="1" max="60" value="10">
            </label>
            <div class="d-flex justify-content-around mt-2 ">
                <button type="button" id="btn_reset_config">Resetar</button>
                <button type="button" id="btn_salvar_config">Salvar</button>
            </div>
        </div>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            var ws = null;
            
            const texto = document.getElementById("texto")
            const cor_fonte = document.getElementById('cor_fonte')
            const cor_fundo = document.getElementById('cor_fundo')
            const anim = document.getElementById('anim')
            const tempo_segundos = document.getElementById('tempo_segundos')
            
            document.getElementById('btn_salvar_config').addEventListener('click', sendConfig)
            document.getElementById('btn_reset_config').addEventListener('click', resetConfig)
            texto.onchange = sendConfig
            cor_fonte.onchange = sendConfig
            cor_fundo.onchange = sendConfig
            tempo_segundos.onchange = sendConfig
            

            // <!-- ws = new WebSocket(`ws://${window.location.host}/ws/` + {{user_name}}) -->
            ws = new WebSocket(`ws://${window.location.host}/ws/{{user_name}}`)
            
            function sendConfig() {
                data_send = {
                    "texto":texto.value,
                    "cor_fonte": cor_fonte.value,
                    "cor_fundo": cor_fundo.value,
                    "anim": anim.value,
                    "tempo_segundos": tempo_segundos.value,
                }
                ws.send(JSON.stringify(data_send))
            }

            function resetConfig() {
                texto.value = 'Exemplo'
                cor_fonte.value = '#0000ff'
                cor_fundo.value = '#cccccc'
                anim.value = 'slide'
                tempo_segundos.value = '10'
                
                data_send = {
                    "texto":'Exemplo',
                    "cor_fonte": '#0000ff',
                    "cor_fundo": '#cccccc',
                    "anim": 'slide',
                    "tempo_segundos": '10',
                }
                ws.send(JSON.stringify(data_send))
            }
        })
    </script>
    <script src="./libs/bootstrap/js/bootstrap.min.js"></script>
</body>

</html>